{"version":3,"file":"static/js/877.bdadb061.chunk.js","mappings":"2JA8BA,IA3BmB,SAAC,GAA0B,IAAxBA,EAAuB,EAAvBA,OAAQC,EAAe,EAAfA,SAC5B,OACE,wBACGD,EAAOE,KAAI,YAAoC,IAAjCC,EAAgC,EAAhCA,MAAOC,EAAyB,EAAzBA,eAAgBC,EAAS,EAATA,GACpC,OACE,yBACE,SAAC,KAAD,CAAMC,GAAE,kBAAaD,GAAME,MAAO,CAAEC,KAAMP,GAA1C,SACGE,GAASC,KAFLC,EAMZ,KAGN,C,qIChBD,GAAiB,E,SCyDjB,EArDkB,SAAC,GAAkB,IAAhBI,EAAe,EAAfA,SACnB,GAA4BC,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAoCF,EAAAA,EAAAA,UAAS,IAA7C,eAAOG,EAAP,KAAmBC,EAAnB,KACA,GAA4BC,EAAAA,EAAAA,MAAnBC,GAAT,eA0BA,OACE,gBAAKC,UAAWC,EAAAA,UAAhB,UACE,kBAAMD,UAAWC,EAAAA,WAAgBT,SAtBhB,SAAAU,GAEnB,GADAA,EAAMC,iBACgB,KAAlBT,EAAOU,OAAX,CAMA,GAAIV,IAAWE,EAGb,OAFAS,MAAM,qBACNV,EAAU,IAIZI,EAAgB,CAAEO,MAAOZ,IACzBG,EAAcH,GACdF,EAASE,GACTC,EAAU,GAXT,MAFCU,MAAM,kCAcT,EAIG,WACE,kBACEL,UAAWC,EAAAA,gBACXM,KAAK,SACLC,MAAOd,EACPe,SA/Ba,SAAAP,GACnBP,EAAUO,EAAMQ,cAAcF,MAAMG,cACrC,EA8BOC,KAAK,OACLC,aAAa,KACbC,WAAS,KAEX,mBAAQF,KAAK,SAASZ,UAAWC,EAAAA,iBAAjC,wBAMP,E,SC/CKc,EAAoB,mCAAG,WAAMC,GAAN,gGAEFC,EAAAA,EAAAA,IAAA,UAJV,+BAIU,iBAAsC,CAC3DC,OAAQ,CACNC,QAPQ,mCAQRC,SAAU,QACVd,MAAOU,EACPK,KAAM,EACNC,eAAe,KARM,cAEnBC,EAFmB,yBAWlBA,EAASC,KAAKC,SAXI,gCAazBC,QAAQC,IAAR,MAbyB,yDAAH,sDAgB1B,I,SCoBA,EAnCe,WACb,OAA4BlC,EAAAA,EAAAA,UAAS,IAArC,eAAOV,EAAP,KAAe6C,EAAf,KACM5C,GAAW6C,EAAAA,EAAAA,MACjB,GAAuB/B,EAAAA,EAAAA,MACjBQ,GADN,eAC2BwB,IAAI,UAAY,IAE3CC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAW,mCAAG,oGACOjB,EAAqBT,GAD5B,UAGQ,KAFpB2B,EADY,QAGHC,OAHG,yCAIT7B,MAAM,4BAJG,OAMlBuB,EAAUK,GANQ,2CAAH,qDAQH,KAAV3B,GAGJ0B,GACD,GAAE,CAAC1B,IAMJ,OACE,4BACE,0BACE,SAAC,EAAD,CAAWd,SAPQ,WACvBoC,EAAU,GACX,OAQG,SAACO,EAAA,EAAD,CAAYpD,OAAQA,EAAQC,SAAUA,MAG3C,C","sources":["components/MoviesList/MoviesList.jsx","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","services/fetchMoviesByKeyword.js","pages/Movies.jsx"],"sourcesContent":["import { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst MoviesList = ({ movies, location }) => {\n  return (\n    <ul>\n      {movies.map(({ title, original_title, id }) => {\n        return (\n          <li key={id}>\n            <Link to={`/movies/${id}`} state={{ from: location }}>\n              {title || original_title}\n            </Link>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nMoviesList.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.string,\n      original_title: PropTypes.string,\n      id: PropTypes.number.isRequired,\n    })\n  ).isRequired,\n  location: PropTypes.object.isRequired,\n};\n\nexport default MoviesList;\n","// extracted by mini-css-extract-plugin\nexport default {};","import { useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport css from './Searchbar.module.css';\n\nconst Searchbar = ({ onSubmit }) => {\n  const [search, setSearch] = useState('');\n  const [prevSearch, setPrevSearch] = useState('');\n  const [, setSearchParams] = useSearchParams();\n\n  const handleChange = event => {\n    setSearch(event.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    if (search.trim() === '') {\n      // если строка пустая и мbl нажали кнопку поиска\n      alert('Please, fill in the input field');\n      return;\n    }\n    // проверка на одинаковое слово\n    if (search === prevSearch) {\n      alert('Same request');\n      setSearch('');\n      return;\n    }\n\n    setSearchParams({ query: search }); // записываем поисковый запрос в хук useSearchParams\n    setPrevSearch(search);\n    onSubmit(search); // передаем поисковый запрос в функцию onSubmit\n    setSearch(''); // reset\n  };\n\n  return (\n    <div className={css.Searchbar}>\n      <form className={css.SearchForm} onSubmit={handleSubmit}>\n        <input\n          className={css.SearchFormInput}\n          name=\"search\"\n          value={search}\n          onChange={handleChange}\n          type=\"text\"\n          autoComplete=\"on\"\n          autoFocus\n        />\n        <button type=\"submit\" className={css.SearchFormButton}>\n          Search\n        </button>\n      </form>\n    </div>\n  );\n};\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import axios from 'axios';\n\nconst API_KEY = 'a4c701b3a41d7d3c7de995b9f81d852d';\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nconst fetchMoviesByKeyword = async keyword => {\n  try {\n    const response = await axios.get(`${BASE_URL}/search/movie`, {\n      params: {\n        api_key: API_KEY,\n        language: 'en-US',\n        query: keyword,\n        page: 1,\n        include_adult: false,\n      },\n    });\n    return response.data.results;\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport default fetchMoviesByKeyword;\n","import { useLocation, useSearchParams } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport Searchbar from 'components/Searchbar/Searchbar';\nimport fetchMoviesByKeyword from 'services/fetchMoviesByKeyword';\nimport MoviesList from 'components/MoviesList/MoviesList';\n\nconst Movies = () => {\n  const [movies, setMovies] = useState([]);\n  const location = useLocation();\n  const [searchParams] = useSearchParams();\n  const query = searchParams.get('query') || ''; // получаем значение поискового запроса из хука useSearchParams\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      const moviesData = await fetchMoviesByKeyword(query);\n\n      if (moviesData.length === 0) {\n        return alert('No movies by your query');\n      }\n      setMovies(moviesData);\n    };\n    if (query === '') {\n      return;\n    }\n    fetchMovies();\n  }, [query]);\n\n  const handleFormSubmit = () => {\n    setMovies([]); // для очистки массива фильмов перед выполнением нового поискового запроса\n  };\n\n  return (\n    <div>\n      <div>\n        <Searchbar onSubmit={handleFormSubmit} />\n      </div>\n\n      <MoviesList movies={movies} location={location} />\n    </div>\n  );\n};\nexport default Movies;\n"],"names":["movies","location","map","title","original_title","id","to","state","from","onSubmit","useState","search","setSearch","prevSearch","setPrevSearch","useSearchParams","setSearchParams","className","css","event","preventDefault","trim","alert","query","name","value","onChange","currentTarget","toLowerCase","type","autoComplete","autoFocus","fetchMoviesByKeyword","keyword","axios","params","api_key","language","page","include_adult","response","data","results","console","log","setMovies","useLocation","get","useEffect","fetchMovies","moviesData","length","MoviesList"],"sourceRoot":""}